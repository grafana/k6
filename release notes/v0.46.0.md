k6 `v0.46` is here üéâ! This release includes:

- (_optional_) `<highlight of breaking changes>`
- `<Summary of new features>` (_one or multiple bullets_)


## Breaking changes

- `#pr`, `<small_break_1>`
- `#pr`, `<small_break_2>`

### (_optional h3_) `<big_breaking_change>` `#pr`

## New features

### Loki log output sending additional headers [#3227](https://github.com/grafana/k6/pull/3227)

k6 has been able to send logs to loki for nearly 3 years since [v0.28.0](https://github.com/grafana/k6/releases/tag/v0.28.0) but didn't support any way to authenticate.

Now it can be configured to send additional headers on every request.

This is being configured with the new `header` config option similar to `label`:

```
k6 --log-output=loki=http://example.org,header.X-My-Header=123,header.Authorization=mytoken ...
```

Will now send the header `X-My-Header` with value `123` and `Authorization` with `mytoken`.

Thanks to @federicotdn for doing the changes.

### Cloud Traces [#3100](https://github.com/grafana/k6/pull/3100), [#3202](https://github.com/grafana/k6/pull/3202)

This release supports the new integration between k6 and Tempo in the cloud. Grafana Cloud k6 and Grafana Cloud Traces customers will be able to start their traces in k6 using the existing `k6/experimental/tracing` module to enrich their test run analysis page with metrics and aggregations from tracing data.

The new cloud traces will work _out of the box_ for runs started from the Grafana Cloud k6 app or from the `k6 cloud script.js` command. In case of `k6 run -o cloud script.js` runs, the `K6_CLOUD_TRACES_ENABLED` environment variable has to be set to `true`.

### `<big_feature_1>` `#pr`

_what, why, and what this means for the user_

### `<big_feature_n>` `#pr`

_what, why, and what this means for the user_

### UX improvements and enhancements

_Format as `<number> <present_verb> <object>. <credit>`_:
- _`#999` Gives terminal output prettier printing. Thanks to `@person` for the help!_

- TODO: [#3157](https://github.com/grafana/pull/3157) and [#3172](https://github.com/grafana/pull/3172) Add a `MaxTimeSeriesInBatch` configuration option.
- [#3159](https://github.com/grafana/pull/3159) Adds per-vu TLS configuration to `grpc.Client` connect method's parameters. Thanks @chrismoran-mica üôá‚Äç‚ôÇÔ∏è.
- [#3176](https://github.com/grafana/pull/3176) Adds a `js/promises` package, which enables extension developers to easily create promises that will be dispatched to the eventloop using the `New` function.
- [#3181](https://github.com/grafana/pull/3181) Adds a `RunOnEventLoop` method to the `modulestest.Runtime` type, which allows extensions developers to run code on the event loop from their tests.

## Bug fixes

- [#3163](https://github.com/grafana/pull/3163) Addresses a bug in our gRPC example.
- [#3178](https://github.com/grafana/pull/3178) Fixes the registration of nested protobuf messages in the gRPC module.
- [#3170](https://github.com/grafana/pull/3170) Upgrades the version of gRPC k6 depends on to address a security vulnerability ([CVE-2023-32731]).

## Maintenance and internal improvements

### Cloud output v2

// TODO @codebien

* [3104](https://github.com/grafana/k6/pull/3104) Retry and flushers pool
* [3108](https://github.com/grafana/k6/pull/3108) Flush chunks
* [3120](https://github.com/grafana/k6/pull/3120) Unlimited size for body payload
* [3125](https://github.com/grafana/k6/pull/3125) Use a static remote service url
* [3162](https://github.com/grafana/k6/pull/3162) Warn about labels that have reserved names
* [3169](https://github.com/grafana/k6/pull/3169) Compact histogram
- [#3182](https://github.com/grafana/k6/pull/3182) Fix off-by-one error for spans
- [#3186](https://github.com/grafana/k6/pull/3186) Be less noisy when handling errors
- [#3187](https://github.com/grafana/k6/pull/3187) Create batches for single bucket flush
- [#3193](https://github.com/grafana/k6/pull/3193) Downscale the batch size
- [#3195](https://github.com/grafana/k6/pull/3195) Make sure to use the overwritten config
- [#3206](https://github.com/grafana/k6/pull/3206) Implement concurrent pushes accross batches
- [#3226](https://github.com/grafana/k6/pull/3226) don't go over maxSeriesInBatch

### Miscellaneous

- [#3211](https://github.com/grafana/k6/pull/3211) Updates the experimental gRPC module version used by k6.
- [#3210](https://github.com/grafana/k6/pull/3210) Updates the xk6-output-prometheus-remote version used by k6.
- [#3194](https://github.com/grafana/k6/pull/3194) Fixes loki log output exiting before push is finished.
- [#3196](https://github.com/grafana/k6/pull/3196) Logs packages lint fixes, and test for loki flushing at end.
- [#3231](https://github.com/grafana/k6/pull/3231) Fixes the tracing module sampling option to default to 1.0 when not set by the user.
- [#3136](https://github.com/grafana/k6/pull/3136) Updates k6 Go dependencies.
- [#3131](https://github.com/grafana/k6/pull/3131) Updates our Pull Request template to be more structured and include a checklist for contributors.
- [#3177](https://github.com/grafana/k6/pull/3177) Updates the version of golangci-lint we use to the latest version.

## _Optional_ Roadmap

_Discussion of future plans_
