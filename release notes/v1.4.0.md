k6 `<version>` is here ðŸŽ‰! This release includes:

- Browser module gets:
  - `page.waitForRequest` for waiting on specific HTTP requests.
  - `QueryAll` methods now return elements in DOM order.

## Breaking changes

- `#pr`, `<small_break_1>`
- `#pr`, `<small_break_2>`

### (_optional h3_) `<big_breaking_change>` `#pr`

## New features

_optional intro here_

### `<big_feature_n>` `#pr`

_what, why, and what this means for the user_

### `page.waitForRequest` [#5330](https://github.com/grafana/k6/pull/5330)

The browser module now supports [`page.waitForRequest()`](https://grafana.com/docs/k6/<K6_VERSION>/javascript-api/k6-browser/page/waitforrequest/), which allows you to wait for HTTP requests that match specific URL patterns during browser automation. This method is particularly valuable for testing scenarios where you need to ensure specific network requests are initiated before proceeding with test actions.

The method supports multiple URL pattern matching strategies:

```javascript
// Wait for exact URL match
const requestPromise = page.waitForRequest('https://api.example.com/data');
await page.click('button[data-testid="load-data"]');
const request = await requestPromise;

// Wait for regex pattern match
await page.waitForRequest(/\/api\/.*\.json$/);

// Use with Promise.all for coordinated actions
await Promise.all([
  page.waitForRequest('https://api.example.com/user-data'),
  page.click('button[data-testid="load-user-data"]')
]);
```

This complements the existing `waitForResponse` method by focusing on HTTP requests rather than responses, providing more granular control over network-dependent test scenarios.

## UX improvements and enhancements

_Format as `<number> <present_verb> <object>. <credit>`_:

- `#pr` `<description>`
- _`#999` Gives terminal output prettier printing. Thanks to `@person` for the help!_
- [#5307](https://github.com/grafana/k6/pull/5307) QueryAll methods now return elements in DOM order. Thank you, @shota3506 for the contribution.

## Bug fixes

_Format as `<number> <present_verb> <object>. <credit>`_:

- _`#111` Fixes race condition in runtime_
- [#5322](https://github.com/grafana/k6/pull/5322) Fixes `browser.newPageInContext` bug where pages created in a browser context were not properly associated with their context.

## Maintenance and internal improvements

_Format as `<number> <present_verb> <object>. <credit>`_:

- _`#2770` Refactors parts of the JS module._
- [#5347](https://github.com/grafana/k6/pull/5347), [#5349](https://github.com/grafana/k6/pull/5349) Browser: Move `k6ext.Promise` to the mapping layer.
- [#5340](https://github.com/grafana/k6/pull/5340) Browser: Simplify page event iteration by using an iterator.
- [#5315](https://github.com/grafana/k6/pull/5315), [#5311](https://github.com/grafana/k6/pull/5311) Browser: Revamped page event listening internals for addition of new features and better maintainability.
- [#5339](https://github.com/grafana/k6/pull/5339) Browser: Remove unused `VU` fields.
- [#5314](https://github.com/grafana/k6/pull/5314) Browser: Refactor pattern matcher.
- [#5222](https://github.com/grafana/k6/pull/5222) Browser: Fix linter errors and warnings.
- [#5207](https://github.com/grafana/k6/pull/5207) Browser: Refactor and improve selector parsing. Thank you for the contribution.
- [#5308](https://github.com/grafana/k6/pull/5308) Format Go Doc comments. Thank you, @shota3506 for the contribution.

## _Optional_ Roadmap

_Discussion of future plans_